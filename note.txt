RuleForge/
â”œâ”€ backend/                       # Flask backend + admin API + existing waf/backend
â”‚  â”œâ”€ venv/                       # (tÃ¹y, local virtualenv)
â”‚  â”œâ”€ backend_app.py              # (báº¡n cÃ³ sáºµn) demo app (port 5001)
â”‚  â”œâ”€ waf.py                      # (báº¡n cÃ³ sáºµn) WAF proxy (port 5000)
â”‚  â”œâ”€ admin_api.py                # Flask API Ä‘á»ƒ UI gá»i (new)
â”‚  â”œâ”€ analyzer.py                 # (báº¡n cÃ³ sáºµn) analyzer script (run manually or via admin_api)
â”‚  â”œâ”€ utils.py                    # (báº¡n cÃ³ sáºµn)
â”‚  â”œâ”€ rules.json
â”‚  â”œâ”€ logs/
â”‚  â”‚  â””â”€ waf.log
â”‚  â”œâ”€ requirements.txt
â”‚  â””â”€ README-backend.md
â”‚
â”œâ”€ frontend/                      # React + Vite UI
â”‚  â”œâ”€ node_modules/
â”‚  â”œâ”€ index.html
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ package-lock.json
â”‚  â”œâ”€ src/
â”‚  â”‚  â”œâ”€ main.jsx
â”‚  â”‚  â”œâ”€ App.jsx
â”‚  â”‚  â”œâ”€ components/
â”‚  â”‚  â”‚  â”œâ”€ RuleList.jsx
â”‚  â”‚  â”‚  â”œâ”€ LogsView.jsx
â”‚  â”‚  â”‚  â””â”€ AnalyzerPanel.jsx
â”‚  â”‚  â””â”€ styles.css
â”‚  â””â”€ README-frontend.md
â”œâ”€ admin-ui/
â”‚  â”œâ”€ index.html
â”‚  â”œâ”€ style.css
â”‚  â””â”€ script.js
â”œâ”€ README.md
â””â”€ note.txt


20/10/2025:
ğŸ§± Tá»•ng quan thay Ä‘á»•i chÃ­nh â€“ RuleForge WAF Backend
1ï¸âƒ£ Tá»± Ä‘á»™ng kÃ­ch hoáº¡t phÃ¢n tÃ­ch (Analyzer Integration)
- Khi cÃ³ má»™t truy cáº­p bá»‹ BLOCKED, waf.py tá»± Ä‘á»™ng gá»i analyzer.py.
- Má»¥c Ä‘Ã­ch: giÃºp há»‡ thá»‘ng tá»± Ä‘á»™ng há»c thÃªm cÃ¡c pattern má»›i â†’ lÆ°u vÃ o rules.json.
- CÆ¡ cháº¿ debounce async Ä‘áº£m báº£o chá»‰ cháº¡y analyzer khi cÃ³ log má»›i, trÃ¡nh spam process.

2ï¸âƒ£ Bá»• sung Machine Learning (ML Layer)
- ThÃªm file ml_model.py dÃ¹ng mÃ´ hÃ¬nh XGBoost (hoáº·c LightGBM) Ä‘á»ƒ:
    + PhÃ¢n tÃ­ch vÃ  phÃ¡t hiá»‡n cÃ¡c request nghi ngá» khÃ´ng náº±m trong rules.json.
    + Há»— trá»£ phÃ¢n loáº¡i táº¥n cÃ´ng (benign/malicious) dá»±a trÃªn Ä‘áº·c trÆ°ng cá»§a request.
- waf.py nay gá»i predict_request() trong ml_model.py Ä‘á»ƒ káº¿t há»£p rule-based + ML-based detection.

3ï¸âƒ£ Dá»¯ liá»‡u huáº¥n luyá»‡n & logs máº«u
- Táº¡o thÃªm file logs.json chá»©a cÃ¡c request máº«u (normal / attack).
- ML model dÃ¹ng cÃ¡c Ä‘áº·c trÆ°ng nhÆ°:
    + Äá»™ dÃ i query, sá»‘ kÃ½ tá»± Ä‘áº·c biá»‡t, cÃ³ chá»©a script, sá»‘ chá»¯ hoa, kÃ½ tá»± ../, SELECT, UNION, v.v.
- Dá»¯ liá»‡u nÃ y dÃ¹ng Ä‘á»ƒ huáº¥n luyá»‡n ban Ä‘áº§u cho mÃ´ hÃ¬nh XGBoost â†’ cho phÃ©p tÆ°á»ng lá»­a há»c hÃ nh vi táº¥n cÃ´ng.

4ï¸âƒ£ CÃ¡ch demo cho team

- Cháº¡y backend
```
cd backend
python waf.py
```

Gá»­i request há»£p lá»‡
```
Invoke-WebRequest -Uri "http://127.0.0.1:5000/search?q=iphone" -UseBasicParsing
```
â†’ âœ… Response: ALLOWED


Gá»­i request táº¥n cÃ´ng
```
Invoke-WebRequest -Uri "http://127.0.0.1:5000/search?q=' OR '1'='1" -UseBasicParsing
```
â†’ ğŸš« BLOCKED â†’ tá»± Ä‘á»™ng gá»i analyzer.py â†’ rules.json cáº­p nháº­t â†’ ML Ä‘Æ°á»£c train thÃªm.

Kiá»ƒm tra láº¡i logs.json Ä‘á»ƒ tháº¥y cÃ¡c máº«u request Ä‘Ã£ Ä‘Æ°á»£c lÆ°u vÃ  Ä‘Ã¡nh nhÃ£n.

5ï¸âƒ£ Lá»£i Ã­ch
Há»‡ thá»‘ng nay cÃ³ kháº£ nÄƒng:
- PhÃ¡t hiá»‡n chá»§ Ä‘á»™ng (rules) + phÃ¡t hiá»‡n thÃ­ch nghi (ML).
- Tá»± cáº­p nháº­t tri thá»©c khi gáº·p pattern má»›i.
- PhÃ¢n tÃ­ch thÃ´ng minh nhá» mÃ´ hÃ¬nh XGBoost thay vÃ¬ chá»‰ dÃ¹ng regex.